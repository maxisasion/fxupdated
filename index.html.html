<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>FX Bulls PRO</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #00c6ff;
      --secondary: #0072ff;
      --dark: #0f172a;
      --darker: #0a1120;
      --success: #00e676;
      --danger: #ff3d00;
      --text: #e2e8f0;
      --gold: #FFD700;
      --bitcoin: #F7931A;
    }
    
    body {
      margin: 0;
      font-family: 'Montserrat', sans-serif;
      background: var(--dark);
      color: var(--text);
      min-height: 100vh;
    }
    
    header {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      padding: 20px;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
      color: white;
    }
    
    .container {
      padding: 20px;
      max-width: 500px;
      margin: 20px auto;
      background: var(--darker);
      border-radius: 8px;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
      color: var(--primary);
    }
    
    input, select, button {
      padding: 12px;
      width: 100%;
      border: none;
      border-radius: 6px;
      font-size: 16px;
    }
    
    input, select {
      background: rgba(15, 23, 42, 0.7);
      color: white;
      border: 1px solid rgba(255,255,255,0.1);
    }
    
    button {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      font-weight: 600;
      cursor: pointer;
      margin-top: 10px;
      transition: opacity 0.3s;
    }
    
    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    
    .hidden { 
      display: none; 
    }
    
    .signal-container {
      background: rgba(15, 23, 42, 0.7);
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      border-left: 4px solid var(--primary);
    }
    
    .signal-details {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    
    .signal-detail {
      background: rgba(0, 0, 0, 0.3);
      padding: 10px;
      border-radius: 6px;
      text-align: center;
    }
    
    .detail-label {
      font-size: 12px;
      color: rgba(255,255,255,0.7);
      margin-bottom: 5px;
    }
    
    .detail-value {
      font-size: 14px;
      font-weight: bold;
    }
    
    .chart-container {
      height: 400px;
      margin: 15px 0;
      border-radius: 8px;
      overflow: hidden;
    }
    
    iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
    
    .loading {
      display: inline-block;
      width: 18px;
      height: 18px;
      border: 3px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: var(--primary);
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .error-message {
      color: var(--danger);
      background: rgba(255, 61, 0, 0.1);
      padding: 10px;
      border-radius: 4px;
      margin: 10px 0;
      font-size: 14px;
    }
    
    .owner-info {
      background: rgba(0, 198, 255, 0.1);
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
      font-size: 14px;
      border-left: 4px solid var(--primary);
    }
    
    .owner-info h4 {
      margin-top: 0;
      color: var(--primary);
    }
    
    .owner-info p {
      margin: 5px 0;
    }
    
    .bitcoin {
      color: var(--bitcoin);
    }
    
    .gold {
      color: var(--gold);
    }

    /* Strategy info styles (only shown on login page) */
    .strategy-info {
      background: rgba(0, 198, 255, 0.1);
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
      font-size: 14px;
      border-left: 4px solid var(--primary);
    }

    .strategy-info h4 {
      margin-top: 0;
      color: var(--primary);
    }

    .strategy-info ul {
      padding-left: 20px;
      margin: 10px 0;
    }

    .strategy-info li {
      margin-bottom: 8px;
    }
  </style>
</head>
<body>

  <header>FX BULLS PRO</header>

  <div class="container" id="login-container">
    <h2 style="text-align: center; margin-bottom: 20px; color: var(--primary);">Member Login</h2>
    
    <div class="form-group">
      <label for="mentorId">Mentor ID</label>
      <input id="mentorId" placeholder="Enter your mentor ID" />
    </div>
    
    <div class="form-group">
      <label for="email">Email</label>
      <input id="email" type="email" placeholder="Your registered email" />
    </div>
    
    <div class="form-group">
      <label for="username">Username</label>
      <input id="username" placeholder="Your username" />
    </div>
    
    <div class="form-group">
      <label for="licenseKey">License Key</label>
      <input id="licenseKey" placeholder="Enter your license key" />
    </div>
    
    <button id="loginBtn">Login</button>

    <!-- Strategy Information (only visible on login page) -->
    <div class="strategy-info">
      <h4>Our Trading Strategy Includes:</h4>
      <ul>
        <li><strong>RSI (14-period)</strong> - Identifies overbought/oversold conditions</li>
        <li><strong>Moving Average (20-period)</strong> - Determines trend direction</li>
        <li><strong>Fractals</strong> - Identifies potential reversal points</li>
        <li><strong>Price Action</strong> - Key support/resistance levels</li>
        <li><strong>Risk Management</strong> - Calculated stop loss and take profit levels</li>
      </ul>
      <p>Our algorithm combines these indicators to generate high-probability trade signals.</p>
    </div>

    <div class="owner-info">
      <h4>FX Bulls PRO Information</h4>
      <p><strong>Owner:</strong> Mfanola Hape</p>
      <p><strong>Contact:</strong> 067 277 1746</p>
      <p><strong>Email:</strong> fxbulls1632@gmail.com</p>
      <p><strong>Membership:</strong> R150 lifetime access</p>
    </div>
  </div>

  <div class="container hidden" id="dashboard">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
      <h3 style="color: var(--primary); margin: 0;">Welcome, <span id="userNameDisplay"></span></h3>
      <button id="logoutBtn" style="padding: 8px 12px; background: var(--danger);">Logout</button>
    </div>
    
    <div class="form-group">
      <label for="pairSelect">Select Trading Pair</label>
      <select id="pairSelect">
        <option value="EUR/USD">EUR/USD</option>
        <option value="GBP/USD">GBP/USD</option>
        <option value="USD/JPY">USD/JPY</option>
        <option value="AUD/USD">AUD/USD</option>
        <option value="USD/CAD">USD/CAD</option>
        <option value="BTC/USD" class="bitcoin">BTC/USD (Bitcoin)</option>
        <option value="XAU/USD" class="gold">XAU/USD (Gold)</option>
      </select>
    </div>
    
    <div class="signal-container">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
        <div style="font-weight: bold; font-size: 16px;" id="signal-pair">EUR/USD</div>
        <div style="font-size: 14px; padding: 4px 8px; border-radius: 4px; background: rgba(0, 198, 255, 0.2);" id="signal-direction">Loading...</div>
      </div>
      
      <div id="signal-message" style="font-size: 14px; margin-bottom: 10px;">
        <div style="display: flex; justify-content: center; align-items: center; height: 30px;">
          <div class="loading"></div>
          <span style="margin-left: 8px;">Analyzing market...</span>
        </div>
      </div>
      
      <div class="signal-details">
        <div class="signal-detail">
          <div class="detail-label">Entry Price</div>
          <div class="detail-value" id="entry-price">-</div>
        </div>
        <div class="signal-detail">
          <div class="detail-label">Take Profit</div>
          <div class="detail-value" id="take-profit">-</div>
        </div>
        <div class="signal-detail">
          <div class="detail-label">Stop Loss</div>
          <div class="detail-value" id="stop-loss">-</div>
        </div>
      </div>
    </div>
    
    <div class="chart-container">
      <iframe id="chartIframe"></iframe>
    </div>
    
    <button id="refreshBtn" style="width: 100%;">Refresh Signal</button>
  </div>

  <script>
    // Configuration
    const config = {
      validMentorId: "2006",
      validEmail: "mrapanyane43@gmail.com",
      validLicenseKeys: [
        "32D-J07-71D-A61",
        "QS2-10S-RS25-02",
        "22-SV-01A-J16"
      ],
      apiKey: "149e57df395440e38120eb64b6acd135",
      pipValues: {
        "EUR/USD": 0.0001,
        "GBP/USD": 0.0001,
        "USD/JPY": 0.01,
        "AUD/USD": 0.0001,
        "USD/CAD": 0.0001,
        "BTC/USD": 1,      // Bitcoin moves in dollars (1 pip = $1)
        "XAU/USD": 0.1      // Gold moves in 0.1 increments
      },
      // Risk parameters (percentage of price for TP/SL)
      riskParameters: {
        "EUR/USD": { tp: 0.005, sl: 0.002 },  // 0.5% TP, 0.2% SL
        "GBP/USD": { tp: 0.005, sl: 0.002 },
        "USD/JPY": { tp: 0.005, sl: 0.002 },
        "AUD/USD": { tp: 0.005, sl: 0.002 },
        "USD/CAD": { tp: 0.005, sl: 0.002 },
        "BTC/USD": { tp: 0.02, sl: 0.01 },    // 2% TP, 1% SL for BTC
        "XAU/USD": { tp: 0.01, sl: 0.005 }     // 1% TP, 0.5% SL for Gold
      }
    };

    // DOM Elements
    const elements = {
      loginContainer: document.getElementById("login-container"),
      dashboard: document.getElementById("dashboard"),
      userNameDisplay: document.getElementById("userNameDisplay"),
      pairSelect: document.getElementById("pairSelect"),
      signalPair: document.getElementById("signal-pair"),
      signalDirection: document.getElementById("signal-direction"),
      signalMessage: document.getElementById("signal-message"),
      entryPrice: document.getElementById("entry-price"),
      takeProfit: document.getElementById("take-profit"),
      stopLoss: document.getElementById("stop-loss"),
      chartIframe: document.getElementById("chartIframe"),
      loginBtn: document.getElementById("loginBtn"),
      refreshBtn: document.getElementById("refreshBtn"),
      logoutBtn: document.getElementById("logoutBtn")
    };

    // Initialize the app
    function init() {
      // Set up event listeners
      elements.loginBtn.addEventListener("click", login);
      elements.refreshBtn.addEventListener("click", generateSignal);
      elements.logoutBtn.addEventListener("click", deactivateLicense);
      elements.pairSelect.addEventListener("change", onPairChange);
      
      // Check if already logged in
      if (localStorage.getItem("loggedIn") === "true") {
        showDashboard();
      }
    }
    
    // Login function
    function login() {
      const mentor = document.getElementById("mentorId").value.trim();
      const email = document.getElementById("email").value.trim();
      const username = document.getElementById("username").value.trim();
      const key = document.getElementById("licenseKey").value.trim();
      
      if (mentor === config.validMentorId && 
          email === config.validEmail && 
          config.validLicenseKeys.includes(key)) {
        
        // Save login state
        localStorage.setItem("loggedIn", "true");
        localStorage.setItem("username", username);
        
        // Show dashboard
        showDashboard();
        
      } else {
        alert("❌ Invalid credentials or license key.");
      }
    }
    
    // Show dashboard
    function showDashboard() {
      elements.loginContainer.classList.add("hidden");
      elements.dashboard.classList.remove("hidden");
      
      // Set username
      elements.userNameDisplay.textContent = localStorage.getItem("username");
      
      // Initialize dashboard
      updateChart();
      generateSignal();
    }
    
    // Logout function
    function deactivateLicense() {
      // Clear state and storage
      localStorage.clear();
      location.reload();
    }
    
    // Handle pair change
    function onPairChange() {
      updateChart();
      generateSignal();
    }
    
    // Update TradingView chart with indicators (but not showing details)
    function updateChart() {
      const pair = elements.pairSelect.value;
      const pairName = elements.pairSelect.options[elements.pairSelect.selectedIndex].text;
      
      // Update signal pair display
      elements.signalPair.textContent = pairName;
      
      // Update iframe with indicators (they'll be visible on the chart but not in our UI)
      const tradingViewSymbol = pair.replace("/", "");
      const iframeSrc = `https://s.tradingview.com/widgetembed/?symbol=${tradingViewSymbol}&interval=15&theme=dark&style=1&timezone=Africa%2FJohannesburg&hide_side_toolbar=true&studies=RSI@tv-basicstudies,MovingAverageExponential@tv-basicstudies,Fractals@tv-basicstudies`;
      elements.chartIframe.src = iframeSrc;
    }
    
    // Generate trading signal with real market data
    async function generateSignal() {
      // Show loading state
      elements.signalMessage.innerHTML = `
        <div style="display: flex; justify-content: center; align-items: center; height: 30px;">
          <div class="loading"></div>
          <span style="margin-left: 8px;">Analyzing market...</span>
        </div>
      `;
      
      const pair = elements.pairSelect.value;
      const currentPrice = await getCurrentPrice(pair);
      
      if (currentPrice === null) return;
      
      // Generate signal based on current price and pair type
      const pipSize = config.pipValues[pair] || 0.0001;
      const riskParams = config.riskParameters[pair] || config.riskParameters["EUR/USD"];
      
      // Determine direction based on recent price action (simulated)
      const direction = Math.random() > 0.5 ? "BUY" : "SELL";
      
      let entry, tp, sl;
      
      if (direction === "BUY") {
        entry = (currentPrice * 0.9995).toFixed(5); // Slightly below current price
        tp = (parseFloat(entry) * (1 + riskParams.tp)).toFixed(5); // TP% above entry
        sl = (parseFloat(entry) * (1 - riskParams.sl)).toFixed(5); // SL% below entry
      } else {
        entry = (currentPrice * 1.0005).toFixed(5); // Slightly above current price
        tp = (parseFloat(entry) * (1 - riskParams.tp)).toFixed(5); // TP% below entry
        sl = (parseFloat(entry) * (1 + riskParams.sl)).toFixed(5); // SL% above entry
      }
      
      // For Bitcoin and Gold, adjust decimal places
      const decimalPlaces = pair === "BTC/USD" ? 2 : (pair === "XAU/USD" ? 2 : 5);
      entry = parseFloat(entry).toFixed(decimalPlaces);
      tp = parseFloat(tp).toFixed(decimalPlaces);
      sl = parseFloat(sl).toFixed(decimalPlaces);
      
      const signal = {
        pair: pair,
        direction: direction,
        entry: entry,
        tp: tp,
        sl: sl,
        timestamp: new Date(),
        currentPrice: currentPrice.toFixed(decimalPlaces)
      };
      
      displaySignal(signal);
    }
    
    // Display signal (without indicator details)
    function displaySignal(signal) {
      // Update direction
      elements.signalDirection.textContent = signal.direction;
      elements.signalDirection.style.background = signal.direction === "BUY" 
        ? "rgba(0, 230, 118, 0.2)" 
        : "rgba(255, 61, 0, 0.2)";
      
      // Color code for crypto and commodities
      if (signal.pair === "BTC/USD") {
        elements.signalDirection.style.color = "var(--bitcoin)";
      } else if (signal.pair === "XAU/USD") {
        elements.signalDirection.style.color = "var(--gold)";
      } else {
        elements.signalDirection.style.color = "white";
      }
      
      // Update signal message
      elements.signalMessage.innerHTML = `
        <div>Signal generated: ${signal.timestamp.toLocaleTimeString()}</div>
        <div>Current price: ${signal.currentPrice}</div>
      `;
      
      // Update details
      elements.entryPrice.textContent = signal.entry;
      elements.takeProfit.textContent = signal.tp;
      elements.stopLoss.textContent = signal.sl;
    }
    
    // Fetch current price from Twelve Data API
    async function getCurrentPrice(symbol) {
      try {
        elements.refreshBtn.disabled = true;
        elements.refreshBtn.textContent = "Loading...";
        
        const response = await fetch(`https://api.twelvedata.com/price?symbol=${symbol}&apikey=${config.apiKey}`);
        const data = await response.json();
        
        if (data.price) {
          return parseFloat(data.price);
        } else {
          throw new Error(data.message || "Failed to fetch price");
        }
      } catch (error) {
        console.error("Error fetching price:", error);
        showError(`Failed to get market data: ${error.message}`);
        return null;
      } finally {
        elements.refreshBtn.disabled = false;
        elements.refreshBtn.textContent = "Refresh Signal";
      }
    }
    
    // Show error message
    function showError(message) {
      elements.signalMessage.innerHTML = `
        <div class="error-message">${message}</div>
      `;
    }
    
    // Initialize the app when DOM is loaded
    document.addEventListener("DOMContentLoaded", init);
  </script>

</body>
</html>